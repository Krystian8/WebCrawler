!function n(t,e,r){function i(o,u){if(!e[o]){if(!t[o]){var c="function"==typeof require&&require;if(!u&&c)return c(o,!0);if(a)return a(o,!0);var s=new Error("Cannot find module '"+o+"'");throw s.code="MODULE_NOT_FOUND",s}var l=e[o]={exports:{}};t[o][0].call(l.exports,function(n){var e=t[o][1][n];return i(e?e:n)},l,l.exports,n,t,e,r)}return e[o].exports}for(var a="function"==typeof require&&require,o=0;o<r.length;o++)i(r[o]);return i}({1:[function(){OO||(OO={})},{}],2:[function(n){n("./InitOO.js"),window._||(window._=n("underscore")),OO._||(OO._=window._.noConflict())},{"./InitOO.js":1,underscore:6}],3:[function(){!function(n,t,e){n.getRandomString=function(){return Math.random().toString(36).substring(7)},n.safeClone=function(r){if(t.isNumber(r)||t.isString(r)||t.isBoolean(r)||t.isFunction(r)||t.isNull(r)||t.isUndefined(r))return r;var i=r instanceof Array?[]:{};try{e.extend(!0,i,r)}catch(a){n.log("deep clone error",a)}return i},n.d=function(){n.isDebug&&n.log.apply(n,arguments),n.$("#OOYALA_DEBUG_CONSOLE").append(JSON.stringify(n.safeClone(arguments))+"<br>")},n.inherit=function(t,e){if("function"!=typeof t)return n.log("invalid inherit, ParentClass need to be a class",t),null;var r=function(){t.apply(this,arguments),"function"==typeof e&&e.apply(this,arguments)},i=new t;return n._.extend(r.prototype,i),r.prototype.parentClass=i,r};var r={};n.attachStyle=function(n,t){var i=e('<style type="text/css">'+n+"</style>").appendTo("head");r[t]=r[t]||[],r[t].push(i)},n.removeStyles=function(t){n._.each(r[t],function(n){n.remove()})},n.getInnerProperty=function(n,e){for(var r=n,i=e;i.length>0;){var a=i.shift();if(t.isNull(r)||!t.isObject(r)||t.isFunction(r)||t.isArray(r))return null;r=r[a]}return r},n.formatSeconds=function(n){var t=parseInt(n,10)%60,e=parseInt(n/3600,10),r=parseInt((n-3600*e)/60,10);return 10>e&&(e="0"+e),10>r&&(r="0"+r),10>t&&(t="0"+t),parseInt(e,10)>0?e+":"+r+":"+t:r+":"+t},n.timeStringToSeconds=function(n){var e=(n||"").split(":");return t.reduce(e,function(n,t){return 60*n+parseInt(t,10)},0)},n.leftPadding=function(n,t){for(var e="0",r=n?n.toString():"";r.length<t;)r=e+r;return r},n.getColorString=function(t){return"#"+n.leftPadding(t.toString(16),6).toUpperCase()},n.hexToRgb=function(n){var t=(16711680&n)>>16,e=(65280&n)>>8,r=255&n;return[t,e,r]},n.changeColor=function(t,e,r){var i=r?Math.max:Math.min,a=r?0:255,o=Math.round(255*e)*(r?-1:1),u=n.hexToRgb(t);return[n.leftPadding(i(u[0]+o,a).toString(16),2),n.leftPadding(i(u[1]+o,a).toString(16),2),n.leftPadding(i(u[2]+o,a).toString(16),2)].join("")},n.decode64=function(n){n=n.replace(/\n/g,"");var t,e="",r=0,i=[],a="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/=";if(window.atob)return atob(n);do{for(t=0;4>t;t++)i[t]=a.indexOf(n.charAt(r++));e+=String.fromCharCode(i[0]<<2|i[1]>>4,64==i[2]?0:(15&i[1])<<4|i[2]>>2,64==i[3]?0:(3&i[2])<<6|i[3])}while(r<n.length);return e.replace(/\0/g,"")},n.pixelPing=function(t){var e=new Image;e.onerror=e.onabort=function(){n.d("onerror:",t)},e.src=n.getNormalizedTagUrl(t)},n.pixelPings=function(e){t.isEmpty(e)||t.each(e,function(t){n.pixelPing(t)},this)},n.stringToBoolean=function(n){return"string"==typeof n?n.toLowerCase().indexOf("true")>-1||n.toLowerCase().indexOf("yes")>-1:!!n},n.regexEscape=function(n){var t=/[<>()\[\]{}]/g;return n.replace(t,"\\$&")},n.getNormalizedTagUrl=function(e,r){var i=(new Date).getTime(),a=escape(document.URL),o=function(r,i){t.each(r,function(t){var r=new RegExp("("+n.regexEscape(t)+")","gi");e=e.replace(r,i)},this)};return o(n.TEMPLATES.RANDOM_PLACE_HOLDER,i),o(n.TEMPLATES.REFERAK_PLACE_HOLDER,a),r&&o(n.TEMPLATES.EMBED_CODE_PLACE_HOLDER,r),e},n.safeSeekRange=function(n){return{start:n.length>0?n.start(0):0,end:n.length>0?n.end(0):0}},n.loadedJS=n.loadedJS||{},n.jsOnSuccessList=n.jsOnSuccessList||{},n.safeFuncCall=function(t){if("function"==typeof t)try{t.apply()}catch(e){n.log("Can not invoke function!",e)}},n.loadScriptOnce=function(t,r,i,a){return n.jsOnSuccessList[t]=n.jsOnSuccessList[t]||[],n.loadedJS[t]?("loaded"===n.loadedJS[t]?n.safeFuncCall(r):"loading"===n.loadedJS[t]&&n.jsOnSuccessList[t].unshift(r),!1):(n.loadedJS[t]="loading",e.ajax({url:t,type:"GET",cache:!0,dataType:"script",timeout:a||15e3,success:function(){n.loadedJS[t]="loaded",n.jsOnSuccessList[t].unshift(r),n._.each(n.jsOnSuccessList[t],function(t){n.safeFuncCall(t)},this),n.jsOnSuccessList[t]=[]},error:function(){n.safeFuncCall(i)}}),!0)};try{n.localStorage=window.localStorage}catch(i){n.log(i)}n.localStorage||(n.localStorage={getItem:function(n){return n&&this.hasOwnProperty(n)?unescape(document.cookie.replace(new RegExp("(?:^|.*;\\s*)"+escape(n).replace(/[\-\.\+\*]/g,"\\$&")+"\\s*\\=\\s*((?:[^;](?!;))*[^;]?).*"),"$1")):null},key:function(n){return unescape(document.cookie.replace(/\s*\=(?:.(?!;))*$/,"").split(/\s*\=(?:[^;](?!;))*[^;]?;\s*/)[n])},setItem:function(n,t){n&&(document.cookie=escape(n)+"="+escape(t)+"; expires=Tue, 19 Jan 2038 03:14:07 GMT; path=/",this.length=document.cookie.match(/\=/g).length)},length:0,removeItem:function(n){n&&this.hasOwnProperty(n)&&(document.cookie=escape(n)+"=; expires=Thu, 01 Jan 1970 00:00:00 GMT; path=/",this.length--)},hasOwnProperty:function(n){return new RegExp("(?:^|;\\s*)"+escape(n).replace(/[\-\.\+\*]/g,"\\$&")+"\\s*\\=").test(document.cookie)}},n.localStorage.length=(document.cookie.match(/\=/g)||n.localStorage).length),n.setItem=function(t,e){try{n.localStorage.setItem(t,e)}catch(r){n.log(r)}},n.JSON=window.JSON}(OO,OO._,OO.$)},{}],4:[function(n){n("../../html5-common/js/utils/InitModules/InitOO.js"),n("../../html5-common/js/utils/InitModules/InitOOUnderscore.js"),OO.Analytics||(OO.Analytics={}),OO.Analytics.FrameworkInstanceList||(OO.Analytics.FrameworkInstanceList=[]),OO.Analytics.PluginFactoryList||(OO.Analytics.PluginFactoryList=[]),OO.Analytics.RegisterPluginFactory||(OO.Analytics.RegisterPluginFactory=function(n){if(OO.Analytics.PluginFactoryList.push(n),OO.Analytics.FrameworkInstanceList&&OO.Analytics.FrameworkInstanceList.length)for(var t=0;t<OO.Analytics.FrameworkInstanceList.length;t++)OO.Analytics.FrameworkInstanceList[t].registerPluginFactory(n)}),OO.Analytics.FrameworkRegistrationObject||(OO.Analytics.FrameworkRegistrationObject=function(n){this.registerPluginFactory=function(t){n.registerPlugin(t)}}),OO.Analytics.RegisterFrameworkInstance||(OO.Analytics.RegisterFrameworkInstance=function(n){var t=new OO.Analytics.FrameworkRegistrationObject(n);if(n.frameworkRegistrationObject=t,OO.Analytics.FrameworkInstanceList.push(t),OO._.isArray(OO.Analytics.PluginFactoryList)&&OO.Analytics.PluginFactoryList.length>0)for(var e=0;e<OO.Analytics.PluginFactoryList.length;e++)n.registerPlugin(OO.Analytics.PluginFactoryList[e])}),OO.Analytics.UnregisterFrameworkInstance||(OO.Analytics.UnregisterFrameworkInstance=function(n){if(n){var t=n.frameworkRegistrationObject;t&&(OO.Analytics.FrameworkInstanceList=OO._.without(OO.Analytics.FrameworkInstanceList,t))}})},{"../../html5-common/js/utils/InitModules/InitOO.js":1,"../../html5-common/js/utils/InitModules/InitOOUnderscore.js":2}],5:[function(n,t){function e(){function n(){}n.apply(this,arguments),this.makeRequest=function(){return this.makeRequestStandard.apply(this,arguments)},this.makeRequestStandard=function(n,t,e,r,i,a){var o=new XMLHttpRequest;return o.open(n,t,!0),r&&o.overrideMimeType&&(o.overrideMimeType=r),r&&o.setRequestHeader&&o.setRequestHeader("Content-Type",r),i>0&&(o.timeout=i,o.ontimeout=function(){o.ontimeout=o.onreadystatechange=null,a&&a(!1,"timeout after "+i+" ms")}),o.onreadystatechange=function(){4===o.readyState&&(o.ontimeout=o.onreadystatechange=null,200==o.status?a&&a(!0,o.responseText):a&&a(!1,"http status "+o.status))},o.send(e),null},this.release=function(){}}function r(){function n(){}n.apply(this,arguments),this.consoleLog=function(n,t){"undefined"!=typeof console&&(console.log&&t===Conviva.SystemSettings.LogLevel.DEBUG||t===Conviva.SystemSettings.LogLevel.INFO?console.log(n):console.warn&&t===Conviva.SystemSettings.LogLevel.WARNING?console.warn(n):console.error&&t===Conviva.SystemSettings.LogLevel.ERROR&&console.error(n))},this.release=function(){}}function i(){function n(){}n.apply(this,arguments),this.getBrowserName=function(){return null},this.getBrowserVersion=function(){return null},this.getDeviceBrand=function(){return null},this.getDeviceManufacturer=function(){return null},this.getDeviceModel=function(){return null},this.getDeviceType=function(){return null},this.getDeviceVersion=function(){return null},this.getFrameworkName=function(){return"HTML5"},this.getFrameworkVersion=function(){return null},this.getOperatingSystemName=function(){return null},this.getOperatingSystemVersion=function(){return null},this.release=function(){}}function a(){function n(){}n.apply(this,arguments),this.saveData=function(n,t,e,r){var i=n+"."+t;try{localStorage.setItem(i,e),r(!0,null)}catch(a){r(!1,a.toString())}},this.loadData=function(n,t,e){var r=n+"."+t;try{var i=localStorage.getItem(r);e(!0,i)}catch(a){e(!1,a.toString())}},this.release=function(){}}function o(){function n(){}n.apply(this,arguments),this.getEpochTimeMs=function(){var n=new Date;return n.getTime()},this.release=function(){}}function u(){function n(){}n.apply(this,arguments),this.createTimer=function(n,t){var e=setInterval(n,t),r=function(){-1!==e&&(clearInterval(e),e=-1)};return r},this.release=function(){}}n("../framework/InitAnalyticsNamespace.js"),n("../../html5-common/js/utils/utils.js");var c=function(n){var t,c=n,s="conviva",l="v1",f="Ooyala",g="4.11.13",p=null,v=null,y=null,O=null,h=null,d=null,m=null,E=null,A=null,S=-1,T=!1,w=!1,b=!1,C=!1,R=!1;this.getName=function(){return s},this.getVersion=function(){return l},this.setPluginID=function(n){t=n},this.getPluginID=function(){return t},this.init=function(){var n;c&&OO._.isFunction(c.getRecordedEvents)&&(n=c.getRecordedEvents(),_.each(n,_.bind(function(n){this.processEvent(n.eventName,n.params)},this))),window.addEventListener("beforeunload",_.bind(function(){this.destroy()},this))};var I=function(){if(d&&k()){if(!m){var n=new Conviva.SystemInterface(new o,new u,new e,new a,new i,new r),t=N();m=new Conviva.SystemFactory(n,t)}var c=P();E=new Conviva.Client(c,m),L()}},N=function(){var n=new Conviva.SystemSettings;return n},P=function(){var n=new Conviva.ClientSettings(d.customerKey);return n.gatewayUrl=d.gatewayUrl,n},D=function(){V()&&(E.cleanupSession(p),p=Conviva.Client.NO_SESSION_KEY)},L=function(){var n=!1;if(R&&h&&O&&E&&v&&y&&!V()){A=E.getPlayerStateManager();var t=new Conviva.ContentMetadata;t.assetName="["+O+"] "+h.title,t.streamUrl=v,t.streamType=y===OO.Analytics.STREAM_TYPE.LIVE_STREAM?Conviva.ContentMetadata.StreamType.LIVE:Conviva.ContentMetadata.StreamType.VOD,t.duration=Math.round(h.duration/1e3);var e=d.applicationName;_.isString(e)&&(t.applicationName=e);var r={};r.playerVendor=f,r.playerVersion=g,r=_.extend(r,d.customMetadata),j(r)&&(t.custom=r),p=E.createSession(t),E.attachPlayer(p,A),K(),n=!0}return n},k=function(){return!!window.Conviva},j=function(n){return _.isObject(n)},F=function(n){var t=!0,e=["gatewayUrl","customerKey"],r=[];return n?_.each(e,function(e){_.has(n,e)||(r.push(e),t=!1)}):(OO.log("Error: Missing Conviva Metadata!"),r=e,t=!1),_.isEmpty(r)||_.each(r,function(n){OO.log("Error: Missing Conviva Metadata Key: "+n)}),t};this.setMetadata=function(n){F(n)?(d=n,I()):this.destroy()},this.processEvent=function(n,e){switch(OO.log("Conviva: PluginID '"+t+"' received this event '"+n+"' with these params:",e),n){case OO.Analytics.EVENTS.VIDEO_ELEMENT_CREATED:e&&e[0]&&e[0].streamUrl&&(v=e[0].streamUrl,L());break;case OO.Analytics.EVENTS.VIDEO_CONTENT_COMPLETED:C=!0;break;case OO.Analytics.EVENTS.PLAYBACK_COMPLETED:K(),D();break;case OO.Analytics.EVENTS.INITIAL_PLAYBACK_REQUESTED:R=!0,L();break;case OO.Analytics.EVENTS.VIDEO_PLAYING:T=!1,B();break;case OO.Analytics.EVENTS.VIDEO_PAUSED:T=!0,G();break;case OO.Analytics.EVENTS.VIDEO_BUFFERING_STARTED:w=!0,J();break;case OO.Analytics.EVENTS.VIDEO_BUFFERING_ENDED:w&&(w=!1,T?G():B());break;case OO.Analytics.EVENTS.VIDEO_SEEK_REQUESTED:G();break;case OO.Analytics.EVENTS.VIDEO_REPLAY_REQUESTED:M(),D(),R=!0,L();break;case OO.Analytics.EVENTS.VIDEO_SOURCE_CHANGED:M(),D(),e&&e[0]&&e[0].embedCode&&(x(),O=e[0].embedCode,L());break;case OO.Analytics.EVENTS.VIDEO_CONTENT_METADATA_UPDATED:e&&e[0]&&(h=e[0],L());break;case OO.Analytics.EVENTS.VIDEO_STREAM_POSITION_CHANGED:e&&e[0]&&e[0].streamPosition&&(b||(S=e[0].streamPosition));break;case OO.Analytics.EVENTS.AD_BREAK_STARTED:b=!0;break;case OO.Analytics.EVENTS.AD_BREAK_ENDED:b=!1;break;case OO.Analytics.EVENTS.AD_STARTED:Y();break;case OO.Analytics.EVENTS.AD_ENDED:$();break;case OO.Analytics.EVENTS.STREAM_TYPE_UPDATED:e&&e[0]&&(y=e[0].streamType,L());break;case OO.Analytics.EVENTS.VIDEO_STREAM_BITRATE_CHANGED:e&&e[0]&&_.isNumber(e[0].bitrate)&&(b||H(e[0].bitrate));break;case OO.Analytics.EVENTS.AD_ERROR:if(e&&e[0]&&e[0].error){var r=e[0].error;A&&A.sendError(r,Conviva.Client.ErrorSeverity.WARNING)}break;case OO.Analytics.EVENTS.ERROR.GENERAL:case OO.Analytics.EVENTS.ERROR.METADATA_LOADING:case OO.Analytics.EVENTS.ERROR.VIDEO_PLAYBACK:case OO.Analytics.EVENTS.ERROR.AUTHORIZATION:if(e&&e[0]&&e[0].errorCode){var i=e[0].errorCode,a=e[0].errorMessage,o="";o=a?"Error Code: "+i+", Error Message: "+a:"Error Code: "+i,A&&A.sendError(o,Conviva.Client.ErrorSeverity.FATAL)}D()}};var M=function(){S=-1,w=!1,T=!1,b=!1,C=!1,R=!1},x=function(){v=null,h=null,O=null};this.destroy=function(){c=null,M(),D(),E&&(E.release(),E=null),m&&(m.release(),m=null)};var V=function(){return p!==Conviva.Client.NO_SESSION_KEY&&null!==p&&"undefined"!=typeof p},U=function(){return A&&E&&V()},q=function(n){U()?A.setPlayerState(n):OO.log("Conviva Plugin Error: trying to set player state when unable to with state "+n)},B=function(){q(Conviva.PlayerStateManager.PlayerState.PLAYING)},G=function(){q(Conviva.PlayerStateManager.PlayerState.PAUSED)},K=function(){q(Conviva.PlayerStateManager.PlayerState.STOPPED)},J=function(){q(Conviva.PlayerStateManager.PlayerState.BUFFERING)},H=function(n){if(U()){var t=Math.round(n/1e3);A.setBitrateKbps(t)}},Y=function(){if(U()){var n=null;0>=S?(OO.log("[Conviva-Ooyala] Playing preroll"),n=Conviva.Client.AdPosition.PREROLL):C?(OO.log("[Conviva-Ooyala] Playing postroll"),n=Conviva.Client.AdPosition.POSTROLL):(OO.log("[Conviva-Ooyala] Playing midroll"),n=Conviva.Client.AdPosition.MIDROLL);var t=Conviva.Client.AdStream.SEPARATE,e=Conviva.Client.AdPlayer.SEPARATE;E.adStart(p,t,e,n)}},$=function(){U()&&E.adEnd(p)}};OO.Analytics.RegisterPluginFactory(c),t.exports=c},{"../../html5-common/js/utils/utils.js":3,"../framework/InitAnalyticsNamespace.js":4}],6:[function(n,t,e){(function(){function n(t,e,r){if(t===e)return 0!==t||1/t==1/e;if(null==t||null==e)return t===e;if(t._chain&&(t=t._wrapped),e._chain&&(e=e._wrapped),t.isEqual&&w.isFunction(t.isEqual))return t.isEqual(e);if(e.isEqual&&w.isFunction(e.isEqual))return e.isEqual(t);var i=f.call(t);if(i!=f.call(e))return!1;switch(i){case"[object String]":return t==String(e);case"[object Number]":return t!=+t?e!=+e:0==t?1/t==1/e:t==+e;case"[object Date]":case"[object Boolean]":return+t==+e;case"[object RegExp]":return t.source==e.source&&t.global==e.global&&t.multiline==e.multiline&&t.ignoreCase==e.ignoreCase}if("object"!=typeof t||"object"!=typeof e)return!1;for(var a=r.length;a--;)if(r[a]==t)return!0;r.push(t);var o=0,u=!0;if("[object Array]"==i){if(o=t.length,u=o==e.length)for(;o--&&(u=o in t==o in e&&n(t[o],e[o],r)););}else{if("constructor"in t!="constructor"in e||t.constructor!=e.constructor)return!1;for(var c in t)if(w.has(t,c)&&(o++,!(u=w.has(e,c)&&n(t[c],e[c],r))))break;if(u){for(c in e)if(w.has(e,c)&&!o--)break;u=!o}}return r.pop(),u}var r=this,i=r._,a={},o=Array.prototype,u=Object.prototype,c=Function.prototype,s=o.slice,l=o.unshift,f=u.toString,g=u.hasOwnProperty,p=o.forEach,v=o.map,y=o.reduce,O=o.reduceRight,h=o.filter,d=o.every,m=o.some,E=o.indexOf,A=o.lastIndexOf,S=Array.isArray,T=Object.keys,_=c.bind,w=function(n){return new F(n)};"undefined"!=typeof e?("undefined"!=typeof t&&t.exports&&(e=t.exports=w),e._=w):r._=w,w.VERSION="1.3.3";var b=w.each=w.forEach=function(n,t,e){if(null!=n)if(p&&n.forEach===p)n.forEach(t,e);else if(n.length===+n.length){for(var r=0,i=n.length;i>r;r++)if(r in n&&t.call(e,n[r],r,n)===a)return}else for(var o in n)if(w.has(n,o)&&t.call(e,n[o],o,n)===a)return};w.map=w.collect=function(n,t,e){var r=[];return null==n?r:v&&n.map===v?n.map(t,e):(b(n,function(n,i,a){r[r.length]=t.call(e,n,i,a)}),n.length===+n.length&&(r.length=n.length),r)},w.reduce=w.foldl=w.inject=function(n,t,e,r){var i=arguments.length>2;if(null==n&&(n=[]),y&&n.reduce===y)return r&&(t=w.bind(t,r)),i?n.reduce(t,e):n.reduce(t);if(b(n,function(n,a,o){i?e=t.call(r,e,n,a,o):(e=n,i=!0)}),!i)throw new TypeError("Reduce of empty array with no initial value");return e},w.reduceRight=w.foldr=function(n,t,e,r){var i=arguments.length>2;if(null==n&&(n=[]),O&&n.reduceRight===O)return r&&(t=w.bind(t,r)),i?n.reduceRight(t,e):n.reduceRight(t);var a=w.toArray(n).reverse();return r&&!i&&(t=w.bind(t,r)),i?w.reduce(a,t,e,r):w.reduce(a,t)},w.find=w.detect=function(n,t,e){var r;return C(n,function(n,i,a){return t.call(e,n,i,a)?(r=n,!0):void 0}),r},w.filter=w.select=function(n,t,e){var r=[];return null==n?r:h&&n.filter===h?n.filter(t,e):(b(n,function(n,i,a){t.call(e,n,i,a)&&(r[r.length]=n)}),r)},w.reject=function(n,t,e){var r=[];return null==n?r:(b(n,function(n,i,a){t.call(e,n,i,a)||(r[r.length]=n)}),r)},w.every=w.all=function(n,t,e){var r=!0;return null==n?r:d&&n.every===d?n.every(t,e):(b(n,function(n,i,o){return(r=r&&t.call(e,n,i,o))?void 0:a}),!!r)};var C=w.some=w.any=function(n,t,e){t||(t=w.identity);var r=!1;return null==n?r:m&&n.some===m?n.some(t,e):(b(n,function(n,i,o){return r||(r=t.call(e,n,i,o))?a:void 0}),!!r)};w.include=w.contains=function(n,t){var e=!1;return null==n?e:E&&n.indexOf===E?-1!=n.indexOf(t):e=C(n,function(n){return n===t})},w.invoke=function(n,t){var e=s.call(arguments,2);return w.map(n,function(n){return(w.isFunction(t)?t||n:n[t]).apply(n,e)})},w.pluck=function(n,t){return w.map(n,function(n){return n[t]})},w.max=function(n,t,e){if(!t&&w.isArray(n)&&n[0]===+n[0])return Math.max.apply(Math,n);if(!t&&w.isEmpty(n))return-1/0;var r={computed:-1/0};return b(n,function(n,i,a){var o=t?t.call(e,n,i,a):n;o>=r.computed&&(r={value:n,computed:o})}),r.value},w.min=function(n,t,e){if(!t&&w.isArray(n)&&n[0]===+n[0])return Math.min.apply(Math,n);if(!t&&w.isEmpty(n))return 1/0;var r={computed:1/0};return b(n,function(n,i,a){var o=t?t.call(e,n,i,a):n;o<r.computed&&(r={value:n,computed:o})}),r.value},w.shuffle=function(n){var t,e=[];return b(n,function(n,r){t=Math.floor(Math.random()*(r+1)),e[r]=e[t],e[t]=n}),e},w.sortBy=function(n,t,e){var r=w.isFunction(t)?t:function(n){return n[t]};return w.pluck(w.map(n,function(n,t,i){return{value:n,criteria:r.call(e,n,t,i)}}).sort(function(n,t){var e=n.criteria,r=t.criteria;return void 0===e?1:void 0===r?-1:r>e?-1:e>r?1:0}),"value")},w.groupBy=function(n,t){var e={},r=w.isFunction(t)?t:function(n){return n[t]};return b(n,function(n,t){var i=r(n,t);(e[i]||(e[i]=[])).push(n)}),e},w.sortedIndex=function(n,t,e){e||(e=w.identity);for(var r=0,i=n.length;i>r;){var a=r+i>>1;e(n[a])<e(t)?r=a+1:i=a}return r},w.toArray=function(n){return n?w.isArray(n)?s.call(n):w.isArguments(n)?s.call(n):n.toArray&&w.isFunction(n.toArray)?n.toArray():w.values(n):[]},w.size=function(n){return w.isArray(n)?n.length:w.keys(n).length},w.first=w.head=w.take=function(n,t,e){return null==t||e?n[0]:s.call(n,0,t)},w.initial=function(n,t,e){return s.call(n,0,n.length-(null==t||e?1:t))},w.last=function(n,t,e){return null==t||e?n[n.length-1]:s.call(n,Math.max(n.length-t,0))},w.rest=w.tail=function(n,t,e){return s.call(n,null==t||e?1:t)},w.compact=function(n){return w.filter(n,function(n){return!!n})},w.flatten=function(n,t){return w.reduce(n,function(n,e){return w.isArray(e)?n.concat(t?e:w.flatten(e)):(n[n.length]=e,n)},[])},w.without=function(n){return w.difference(n,s.call(arguments,1))},w.uniq=w.unique=function(n,t,e){var r=e?w.map(n,e):n,i=[];return n.length<3&&(t=!0),w.reduce(r,function(e,r,a){return(t?w.last(e)===r&&e.length:w.include(e,r))||(e.push(r),i.push(n[a])),e},[]),i},w.union=function(){return w.uniq(w.flatten(arguments,!0))},w.intersection=w.intersect=function(n){var t=s.call(arguments,1);return w.filter(w.uniq(n),function(n){return w.every(t,function(t){return w.indexOf(t,n)>=0})})},w.difference=function(n){var t=w.flatten(s.call(arguments,1),!0);return w.filter(n,function(n){return!w.include(t,n)})},w.zip=function(){for(var n=s.call(arguments),t=w.max(w.pluck(n,"length")),e=new Array(t),r=0;t>r;r++)e[r]=w.pluck(n,""+r);return e},w.indexOf=function(n,t,e){if(null==n)return-1;var r,i;if(e)return r=w.sortedIndex(n,t),n[r]===t?r:-1;if(E&&n.indexOf===E)return n.indexOf(t);for(r=0,i=n.length;i>r;r++)if(r in n&&n[r]===t)return r;return-1},w.lastIndexOf=function(n,t){if(null==n)return-1;if(A&&n.lastIndexOf===A)return n.lastIndexOf(t);for(var e=n.length;e--;)if(e in n&&n[e]===t)return e;return-1},w.range=function(n,t,e){arguments.length<=1&&(t=n||0,n=0),e=arguments[2]||1;for(var r=Math.max(Math.ceil((t-n)/e),0),i=0,a=new Array(r);r>i;)a[i++]=n,n+=e;return a};var R=function(){};w.bind=function(n,t){var e,r;if(n.bind===_&&_)return _.apply(n,s.call(arguments,1));if(!w.isFunction(n))throw new TypeError;return r=s.call(arguments,2),e=function(){if(!(this instanceof e))return n.apply(t,r.concat(s.call(arguments)));R.prototype=n.prototype;var i=new R,a=n.apply(i,r.concat(s.call(arguments)));return Object(a)===a?a:i}},w.bindAll=function(n){var t=s.call(arguments,1);return 0==t.length&&(t=w.functions(n)),b(t,function(t){n[t]=w.bind(n[t],n)}),n},w.memoize=function(n,t){var e={};return t||(t=w.identity),function(){var r=t.apply(this,arguments);return w.has(e,r)?e[r]:e[r]=n.apply(this,arguments)}},w.delay=function(n,t){var e=s.call(arguments,2);return setTimeout(function(){return n.apply(null,e)},t)},w.defer=function(n){return w.delay.apply(w,[n,1].concat(s.call(arguments,1)))},w.throttle=function(n,t){var e,r,i,a,o,u,c=w.debounce(function(){o=a=!1},t);return function(){e=this,r=arguments;var s=function(){i=null,o&&n.apply(e,r),c()};return i||(i=setTimeout(s,t)),a?o=!0:u=n.apply(e,r),c(),a=!0,u}},w.debounce=function(n,t,e){var r;return function(){var i=this,a=arguments,o=function(){r=null,e||n.apply(i,a)};e&&!r&&n.apply(i,a),clearTimeout(r),r=setTimeout(o,t)}},w.once=function(n){var t,e=!1;return function(){return e?t:(e=!0,t=n.apply(this,arguments))}},w.wrap=function(n,t){return function(){var e=[n].concat(s.call(arguments,0));return t.apply(this,e)}},w.compose=function(){var n=arguments;return function(){for(var t=arguments,e=n.length-1;e>=0;e--)t=[n[e].apply(this,t)];return t[0]}},w.after=function(n,t){return 0>=n?t():function(){return--n<1?t.apply(this,arguments):void 0}},w.keys=T||function(n){if(n!==Object(n))throw new TypeError("Invalid object");var t=[];for(var e in n)w.has(n,e)&&(t[t.length]=e);return t},w.values=function(n){return w.map(n,w.identity)},w.functions=w.methods=function(n){var t=[];for(var e in n)w.isFunction(n[e])&&t.push(e);return t.sort()},w.extend=function(n){return b(s.call(arguments,1),function(t){for(var e in t)n[e]=t[e]}),n},w.pick=function(n){var t={};return b(w.flatten(s.call(arguments,1)),function(e){e in n&&(t[e]=n[e])}),t},w.defaults=function(n){return b(s.call(arguments,1),function(t){for(var e in t)null==n[e]&&(n[e]=t[e])}),n},w.clone=function(n){return w.isObject(n)?w.isArray(n)?n.slice():w.extend({},n):n},w.tap=function(n,t){return t(n),n},w.isEqual=function(t,e){return n(t,e,[])},w.isEmpty=function(n){if(null==n)return!0;if(w.isArray(n)||w.isString(n))return 0===n.length;for(var t in n)if(w.has(n,t))return!1;return!0},w.isElement=function(n){return!(!n||1!=n.nodeType)},w.isArray=S||function(n){return"[object Array]"==f.call(n)},w.isObject=function(n){return n===Object(n)},w.isArguments=function(n){return"[object Arguments]"==f.call(n)},w.isArguments(arguments)||(w.isArguments=function(n){return!(!n||!w.has(n,"callee"))}),w.isFunction=function(n){return"[object Function]"==f.call(n)},w.isString=function(n){return"[object String]"==f.call(n)},w.isNumber=function(n){return"[object Number]"==f.call(n)},w.isFinite=function(n){return w.isNumber(n)&&isFinite(n)},w.isNaN=function(n){return n!==n},w.isBoolean=function(n){return n===!0||n===!1||"[object Boolean]"==f.call(n)},w.isDate=function(n){return"[object Date]"==f.call(n)},w.isRegExp=function(n){return"[object RegExp]"==f.call(n)},w.isNull=function(n){return null===n},w.isUndefined=function(n){return void 0===n},w.has=function(n,t){return g.call(n,t)},w.noConflict=function(){return r._=i,this},w.identity=function(n){return n},w.times=function(n,t,e){for(var r=0;n>r;r++)t.call(e,r)},w.escape=function(n){return(""+n).replace(/&/g,"&amp;").replace(/</g,"&lt;").replace(/>/g,"&gt;").replace(/"/g,"&quot;").replace(/'/g,"&#x27;").replace(/\//g,"&#x2F;")},w.result=function(n,t){if(null==n)return null;var e=n[t];return w.isFunction(e)?e.call(n):e},w.mixin=function(n){b(w.functions(n),function(t){x(t,w[t]=n[t])})};var I=0;w.uniqueId=function(n){var t=I++;return n?n+t:t},w.templateSettings={evaluate:/<%([\s\S]+?)%>/g,interpolate:/<%=([\s\S]+?)%>/g,escape:/<%-([\s\S]+?)%>/g};var N=/.^/,P={"\\":"\\","'":"'",r:"\r",n:"\n",t:"	",u2028:"\u2028",u2029:"\u2029"};for(var D in P)P[P[D]]=D;var L=/\\|'|\r|\n|\t|\u2028|\u2029/g,k=/\\(\\|'|r|n|t|u2028|u2029)/g,j=function(n){return n.replace(k,function(n,t){return P[t]})};w.template=function(n,t,e){e=w.defaults(e||{},w.templateSettings);var r="__p+='"+n.replace(L,function(n){return"\\"+P[n]}).replace(e.escape||N,function(n,t){return"'+\n_.escape("+j(t)+")+\n'"}).replace(e.interpolate||N,function(n,t){return"'+\n("+j(t)+")+\n'"}).replace(e.evaluate||N,function(n,t){return"';\n"+j(t)+"\n;__p+='"})+"';\n";e.variable||(r="with(obj||{}){\n"+r+"}\n"),r="var __p='';var print=function(){__p+=Array.prototype.join.call(arguments, '')};\n"+r+"return __p;\n";var i=new Function(e.variable||"obj","_",r);if(t)return i(t,w);var a=function(n){return i.call(this,n,w)};return a.source="function("+(e.variable||"obj")+"){\n"+r+"}",a},w.chain=function(n){return w(n).chain()};var F=function(n){this._wrapped=n};w.prototype=F.prototype;var M=function(n,t){return t?w(n).chain():n},x=function(n,t){F.prototype[n]=function(){var n=s.call(arguments);return l.call(n,this._wrapped),M(t.apply(w,n),this._chain)}};w.mixin(w),b(["pop","push","reverse","shift","sort","splice","unshift"],function(n){var t=o[n];F.prototype[n]=function(){var e=this._wrapped;t.apply(e,arguments);var r=e.length;return"shift"!=n&&"splice"!=n||0!==r||delete e[0],M(e,this._chain)}}),b(["concat","join","slice"],function(n){var t=o[n];F.prototype[n]=function(){return M(t.apply(this._wrapped,arguments),this._chain)}}),F.prototype.chain=function(){return this._chain=!0,this},F.prototype.value=function(){return this._wrapped}}).call(this)},{}]},{},[5]);
